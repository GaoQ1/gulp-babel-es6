{"version":3,"sources":["promise.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAkBA,IAAI,UAAU,SAAV,OAAU,CAAS,GAAT,EAAa;AACvB,QAAI,UAAU,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAiB,MAAjB,EAAwB;AAC9C,YAAI,SAAS,IAAI,cAAJ,EAAT,CAD0C;AAE9C,eAAO,IAAP,CAAY,KAAZ,EAAkB,GAAlB,EAF8C;AAG9C,eAAO,kBAAP,GAA4B,OAA5B,CAH8C;AAI9C,eAAO,YAAP,GAAsB,MAAtB,CAJ8C;AAK9C,eAAO,gBAAP,CAAwB,QAAxB,EAAiC,kBAAjC,EAL8C;AAM9C,eAAO,IAAP,GAN8C;;AAQ9C,iBAAS,OAAT,GAAkB;AACd,gBAAG,KAAK,SAAL,KAAmB,CAAnB,EAAqB;AACpB,uBADoB;aAAxB;AAGA,gBAAG,KAAK,MAAL,KAAgB,GAAhB,EAAoB;AACnB,wBAAQ,KAAK,QAAL,CAAR,CADmB;aAAvB,MAEK;AACD,uBAAO,IAAI,KAAJ,CAAU,KAAK,UAAL,CAAjB,EADC;aAFL;SAJJ,CAR8C;AAkB9C,eAAO,OAAP,CAlB8C;KAAxB,CAAtB,CADmB;CAAb;;AAuBd,QAAQ,aAAR,EAAuB,IAAvB,CAA4B,UAAS,IAAT,EAAc;AACtC,YAAQ,GAAR,CAAY,IAAZ,EADsC;CAAd,CAA5B,CAEG,KAFH,CAES,UAAS,KAAT,EAAe;AACpB,YAAQ,GAAR,CAAY,KAAZ,EAAkB,KAAlB,EADoB;CAAf,CAFT","file":"promise.js","sourcesContent":["//异步加载图片\r\n/*function loadImageAsync(url){\r\n    return new Promise(function(resolve,reject){\r\n        var image = new Image();\r\n\r\n        image.onload = function(){\r\n            resolve(image);\r\n        }\r\n\r\n        image.onerror = function(){\r\n            reject(new Error('Could not load image at' + url));\r\n        };\r\n\r\n        image.src = url;\r\n    });\r\n}*/\r\n\r\n//Promise对象实现Ajax操作的例子\r\nvar getJson = function(url){\r\n    var promise = new Promise(function(resolve,reject){\r\n        var client = new XMLHttpRequest();\r\n        client.open(\"GET\",url);\r\n        client.onreadystatechange = handler;\r\n        client.responseType = \"json\";\r\n        client.setRequestHeader(\"Accept\",\"application/json\");\r\n        client.send();\r\n\r\n        function handler(){\r\n            if(this.readState !== 4){\r\n                return;\r\n            }\r\n            if(this.status === 200){\r\n                resolve(this.response);\r\n            }else{\r\n                reject(new Error(this.statusText));\r\n            }\r\n        };\r\n        return promise;\r\n    });\r\n};\r\n\r\ngetJson(\"/posts/json\").then(function(json){\r\n    console.log(json);\r\n}).catch(function(error){\r\n    console.log(\"出错了\",error);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}